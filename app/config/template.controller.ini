    private $model;

    public function index($moe)
    {
        $moe->set('fields', $this->model->fields());
        $moe->send('{#table#}/list');
    }

    public function data($moe)
    {
        $self = $moe->siteUrl('crud_{#table#}');
        $moe->send(array('data'=>$this->model
            ->select(<<<SEL
concat('<a href="{$self}/input?id=', {table}.{#primary_key#}, '" class="text-green" title="Edit"><i class="fa fa-edit"></i></a>',
'<a href="{$self}/delete?id=', {table}.{#primary_key#}, '" class="text-red" title="Delete" data-bootbox="confirm"><i class="fa fa-remove"></i></a>') as actions,
{#columns_select#}
SEL
)->fetchMode('num')->all()));
    }

    public function input($moe)
    {
        $this->model
            ->findByPK($moe->get('GET.id'))
            ->get(1);
        if ($moe->isPost()) {
            $this->model->copyfrom('POST');
            !$this->model->save() || $moe->reroute('@crud_{#table#}');
            $moe->set('message', 'Data gagal disimpan!');
            !$this->model->hasMessage() || $moe->concat('message', '<br>'.
                $this->model->asList('messages'));
        } else
            $this->model->copyto('POST');
        $moe->set('fields', $this->model->fields());
        $moe->send('{#table#}/input');
    }

    public function delete($moe)
    {
        $moe->send(array('result'=>$this->model
            ->findByPK($moe->get('GET.id'))
            ->get(1)
            ->delete()));
    }

    public function __construct($moe)
    {
        parent::__construct($moe);
        $moe->set('active', 'crud_{#table#}');
        $this->model = {#model#}::instance();
    }